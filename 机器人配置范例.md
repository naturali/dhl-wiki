#机器人配置范例

我们根据场景和业务复杂度，配置了三个机器人。您可根据真实的使用场景，选择性参考。

- [**范例1：系统基础实体 ➕ 一个技能响应**](#1)
- [**范例2：系统基础实体 ➕ 多个技能响应**](#2)
- [**范例3：自定义基础实体 ➕ 复合实体**](#3)

### <h2 id="1">范例1：系统基础实体 ➕ 一个技能响应</h2>

场景：查天气。

最终目的：通过城市、日期，查天气。

配置：基础实体+一个技能响应。

模拟对话场景：

> 用户：天气预报
>
> 答：你想查询哪个城市的天气？
>
> 用户：上海
>
> 答：你想查询上海哪一天的天气？
>
> 用户：一月八日
>
> 答：好的，马上帮您查询一月八日上海的天气。

###1）创建意图技能“查天气”

页面点击左侧导航栏“意图技能”，选择上方导航栏的“创建”，输入名称“查天气”即可。

###2）配置实体参数列表

对于“查天气”场景可能需要的信息是：城市、日期。考虑到城市对应的是[**系统基础实体**](系统基础实体.md)：ni.cn_city；日期对应的是[**系统基础实体**](系统基础实体.md)：ni.date。那么我们首先可以把需要的基础实体添加到参数列表内，只需点击“请添加实体”，找到对应实体，确认引用即可。（如图1-1）

![img](../查天气 图1-1.png)

**（图1-1）**

此时我们的参数列表，就已经包含“ni.cn_city”、“ni.date”。（如图1-2）

![img](../查天气 图1-2.png)

**（图1-2）**

点击“ni.cn_city”进入详情，可以进行更详细的设置。

这里我们先忽略“多值”、“确认信息”、“允许不确定值”等信息。

我们只需要给参数标识起一个可识别的名字“城市”，并为此参数设置追问语句（追问语句指：某个参数的信息缺失时，我们向用户发起的，针对于此参数的询问）。

在查天气的场景里，我们就可以把针对“城市”的追问设置为“你想查询哪个城市的天气？”（如图1-3）

![img](../查天气 图1-3.png)

**（图1-3）**

接下来，我们点击“ni.date”进入关于“日期”的详细设置页面。

同上，这个页面的我们也只需要配置参数标识名字和追问语句。（如图1-4）

不同的是，在这里我们对追问语句进行一些更人性化的设定，可以看到我有两个追问语句，第二个追问语句有“$城市original $”的信息。

它呈现给用户的效果是，当我们已经得到了“城市”的信息，比如“北京”，那么用户看到的询问就会是“你想查询北京哪一天的天气？”。也就是说“$城市original$”就是得到的“城市”信息，并且会自动替换。

这部分的具体配置方法是：在第一条追问语句后，“Enter”键进入下一行，正常输入追问语句，在需要替换的参数处，使用英文符号“$”，就会自动出现参数列表，点击引用即可。（如图1-5）

![img](../查天气 图1-4.png)

**（图1-4）**

![img](../查天气 图1-5.png)

**（图1-5）**

###3）配置技能响应

找到页面最下方的“技能响应+”，点击“+”，添加一个响应。

为此技能响应起一个可识别的名字。

假设我们只有得到了“**城市**”和“**日期**”的信息才能得到技能响应，那么我们就需要添加参数“城市”、“日期”。

选择一种回复方式，这里我们暂时选择文本回复，并添加内容“好的，马上帮您查询$日期​$$城市​$的天气。”可以看到这里我又使用了“$日期​$$城市​$”，同参数列表，这里也是通过英文符号“$”调出参数列表，选择自己需要的参数引用。如用户表达了城市“北京”，日期“一月三日”，那么收到的回复就是“好的，马上帮您查询一月三日北京的天气。”

![img](../查天气 图1-6.png)

**（图1-6）**

###4）用户表达示例

好的，我们已经设置了这个技能需要的参数和响应。接下来，我们需要模拟用户的表达，来定义一些用户表达示例，使用户的表达与查天气的意图能够顺利匹配上。

针对“查天气”的场景，假设用户可能的表达如下：

> 天气预报
>
> 北京天气
>
> 北京一月三日天气
>
> 下雨吗
>
> 有风吗
>
> …...

这时，我们把这些添加到用户表达示例里即可，注意这里的“北京”和“一月三日”需要与参数列表的“城市”、“日期”一一对应。（如图1-7）

![img](../查天气 图1-7.png)

**（图1-7）**

### 

### <h2 id="2">**范例2：系统基础实体 ➕ 多个技能响应**</h2>

场景：查天气。

最终目的：既可以通过城市、日期查天气，也可以只通过城市默认查询当天的天气。

配置：基础实体+多个技能响应。

模拟对话场景：

> 用户：看下天气预报
>
> 答：你想查询哪个城市的天气？
>
> 用户：上海
>
> 答：好的，这就帮你查询上海今天的天气。

###1）参数列表的信息同**范例1**

###2）为“查天气”添加另一种可能的技能响应

比如正常情况下，普通用户如果表达“北京天气”，我们认为他是想查看北京今天的天气。

那么此时，我们就可以再添加一个技能响应，起一个可识别的名称。选择唯一的必要参数“城市”，并添加对应的文本回复“好的，这就帮你查询$城市original​$今天的天气。”（如图2-1）

![img](../查天气 图2-1.png)

**（图2-1）**

###3）添加用户表达实例

此时我们针对“城市-天气”的技能响应，可以再添加一些用户表达示例。（如图2-2）

> 北京天气
>
> 北京空气指数
>
> 北京温度
>
> …...

![img](../查天气 图2-2.png)

**（图2-2）**



### <h2 id="3">**范例3：自定义基础实体 ➕ 复合实体**</h2>

场景：买口红。

最终目的：通过口红类型、口红品牌、口红颜色等信息为用户找到合适的口红。

配置：自定义基础实体 + 复合实体 + 一个技能响应。

模拟对话场景：

> 用户：买口红
>
> 答：请问你对口红类型有要求吗？
>
> 用户：嗯有要求
>
> 答：你比较喜欢的口红类型是什么？如：唇膏、唇釉、唇蜜
>
> 用户：唇釉
>
> 答：你想买什么牌子的口红？
>
> 用户：香奈儿
>
> 答：你想买什么颜色的口红？
>
> 用户：都可以
>
> 答：好的，已经为你找到符合条件的口红

###1）创建意图技能“买口红”

###2）自定义基础实体

对于“买口红”场景可能需要的信息是：口红类型、口红品牌、口红颜色。

其中口红颜色可以用系统基础实体“**ni.color**”实现。

而口红类型、口红品牌，这些基础实体在系统中都不存在，此时就可以用自定义基础实体来实现。

- 定义口红类型：唇彩、染唇液、唇膏、唇釉、唇蜜、唇油
- 定义口红品牌：纪梵希、tf、娇兰、美宝莲、ysl、香奈儿

步骤：右侧导航栏——基础实体——自定义——创建——命名——添加关键词及同义词

页面效果，以口红品牌为例（如图3-1）

![img](../买口红 图3-1.png)

**（图3-1）**

###3）复合实体定义

模拟对话场景中，有一个关于“请问你对口红类型有要求吗？”的问题，且如果回答是肯定的，还需要继续询问“你比较喜欢的口红类型是什么？如：唇膏、唇釉、唇蜜”，关系图如下：

![img](../买口红 图3-2.png)

**（图3-2）**

这种面临是否（布尔）选择的问题，可以通过复合实体来解决。创建一个复合实体勾选“无继承”。

命名“口红类型”，并在参数列表添加刚刚自定义的实体“口红类型”，为其添加追问语句“你比较喜欢的口红类型是什么？如：唇膏、唇釉、唇蜜”。

之后再用户表达示例，如“唇釉”，就可以了。（如图3-3、图3-4）

![img](../买口红 图3-3.png)

**（图3-3）**

![img](../买口红 图3-4.png)

**（图3-4）**

###4）参数列表的信息

目前，买口红技能所需要的参数信息：口红类型（复合实体）、口红品牌（哈哈哈.口红品牌）、口红颜色（ni.color），都已配置完成，我们只需在意图技能页面，分别添加三个实体和其对应的追问即可。

回头再看刚刚的场景中有一个问题：“你想买什么颜色的口红？”，“都可以”。

针对于这种允许用户不回答准确答案的信息。我们可以在参数想去里进行设置，在“允许不确定值”处，勾选“是”。（如图3-5）

![img](../买口红 图3-5.png)

**（图3-5）**

###5）配置技能响应

必要参数，选择需要的信息：口红型号、口红品牌、口红颜色，并添加文本回复：好的，已经为你找到符合条件的口红。（如图3-6）

![img](../买口红 图3-6.png)

**（图3-6）**

###6）添加用户表达实例

最后，我们需要模拟用户的表达，来定义一些用户表达示例，使用户的表达与买口红的意图能够顺利匹配上。

针对“买口红”的场景，假设用户可能的表达如下：

> 买口红
>
> 买ysl口红
>
> 看看ysl唇釉
>
> 买正红色的口红
>
> 买唇膏
>
> …...

这时，我们把这些添加到用户表达示例里即可，注意这里的“**ysl**”和“**正红色**”需要与参数列表的“口红品牌”、“口红颜色”一一对应。（如图3-7）

![img](../买口红 图3-7.png)

**（图3-7）**

